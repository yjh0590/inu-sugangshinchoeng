<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>수강신청 매크로 방지 연습</title>
    <!-- Supabase JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            -webkit-font-smoothing: antialiased;
            background-color: rgba(0, 0, 0, 0.4);
            background-blend-mode: overlay;
        }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('./images.jpeg');
            background-size: cover; background-position: center;
            filter: blur(4px); z-index: -1;
        }
        .font-digital { font-family: 'Roboto Mono', monospace; }
        .text-shadow { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); }
        #department-select { max-height: 200px; overflow-y: auto; }
        /* Style for the active tab */
        .tab-active {
            border-color: #FBBF24; /* amber-400 */
            color: white;
            background-color: rgba(251, 191, 36, 0.2);
        }
        /* Style for scrollable tabs */
        .scrollable-tabs::-webkit-scrollbar {
            height: 4px;
        }
        .scrollable-tabs::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-md mx-auto p-6 sm:p-8 text-center transition-all duration-300">

        <!-- Start Screen -->
        <div id="start-screen">
            <h1 class="text-3xl sm:text-4xl font-bold text-white text-shadow mb-2">수강신청 연습</h1>
            <p class="text-white text-shadow mb-8">모드를 선택하세요!</p>
            <div class="space-y-4">
                <button id="mode-10-button" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-indigo-700">10개 모드</button>
                <button id="mode-infinite-button" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-teal-700">무한 모드</button>
                <button id="view-my-records-button" class="w-full bg-purple-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-purple-700">내 기록 보기</button>
                <button id="view-ranking-button" class="w-full bg-amber-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-amber-700">랭킹 보기</button>
            </div>
            <div class="mt-8 text-white text-shadow">누적 방문자: <span id="visitor-count" class="font-bold">...</span>명</div>
        </div>

        <!-- Practice Screen (hidden) -->
        <div id="practice-screen" class="hidden relative">
            <!-- ... (practice screen content remains the same) ... -->
        </div>

        <!-- Department Input Screen (hidden) -->
        <div id="department-screen" class="hidden">
            <!-- ... (department screen content remains the same) ... -->
        </div>

        <!-- Leaderboard Screen (hidden) -->
        <div id="leaderboard-screen" class="hidden">
            <h1 class="text-3xl sm:text-4xl font-bold text-white text-shadow mb-4">명예의 전당</h1>
            <div id="tabs-container" class="flex items-center border-b border-gray-500/50 mb-4 overflow-x-auto scrollable-tabs">
                <button id="tab-all" class="flex-shrink-0 px-4 py-2 font-bold transition">전체</button>
                <!-- Daily tabs will be generated here -->
            </div>
            <!-- ADDED: Daily Champion Display -->
            <div id="daily-winner-display" class="hidden mb-4"></div>
            <div id="leaderboard-list" class="space-y-2 text-left">
                <!-- Rankings will be inserted here by JavaScript -->
            </div>
            <button id="leaderboard-home-button" class="w-full mt-6 bg-slate-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-slate-700">처음으로 돌아가기</button>
        </div>

        <!-- My Records Screen (hidden) -->
        <div id="my-records-screen" class="hidden">
            <!-- ... (my records screen content remains the same) ... -->
        </div>
        
    </div>

    <script>
       // --- Supabase Setup ---
const SUPABASE_URL = 'https://pyqiesyvpkuqqirenggq.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB5cWllc3l2cGt1cXFpcmVuZ2dxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwNzMxODEsImV4cCI6MjA3MDY0OTE4MX0.y4cWm8Vthf4s2lvu1GozcIWlKMA0o4FbO_HFHoV0uaY';
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// --- HTML Content Injection ---
// IMPORTANT: Inject HTML content first before getting references to the elements inside them.
const practiceScreenContainer = document.getElementById('practice-screen');
practiceScreenContainer.innerHTML = `<button id="infinite-home-button" class="hidden absolute top-0 left-0 text-white bg-slate-600/50 hover:bg-slate-700/70 rounded-full p-2 m-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></button><div id="wrong-attempts-display" class="absolute top-0 right-0 text-red-500 font-bold text-lg text-shadow m-2 p-2"></div><div id="round-counter" class="text-white text-shadow font-bold text-lg mb-4 h-6"></div><div id="number-display" class="font-digital text-6xl sm:text-8xl font-black text-white text-shadow my-4 h-24 flex items-center justify-center"></div><div class="flex items-stretch justify-center space-x-2"><input type="tel" id="input-field" class="flex-grow w-2/3 text-center text-3xl p-3 border-2 border-slate-300 rounded-lg shadow-md" placeholder="####" maxlength="4" disabled><button id="submit-button" class="w-1/3 bg-green-600 text-white font-bold rounded-lg shadow-lg" disabled>확인</button></div><div id="feedback-display" class="mt-4 h-6 text-xl font-bold text-shadow"></div>`;

const departmentScreenContainer = document.getElementById('department-screen');
departmentScreenContainer.innerHTML = `<h1 class="text-3xl sm:text-4xl font-bold text-white text-shadow mb-6">기록 등록</h1><p class="text-white text-shadow mb-4">랭킹에 표시될 학과를 선택하세요.</p><div class="relative mb-2"><input type="text" id="department-search" class="w-full text-lg p-3 pl-10 border-2 border-slate-300 rounded-lg shadow-md bg-white" placeholder="학과 검색..."><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></div></div><select id="department-select" class="w-full text-center text-lg p-3 border-2 border-slate-300 rounded-lg shadow-md bg-white" size="5"></select><button id="submit-score-button" class="w-full mt-4 bg-green-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-green-700">기록 제출 및 랭킹 보기</button>`;

const departmentSelectElement = document.getElementById('department-select');
departmentSelectElement.innerHTML = `<option value="">-- 학과를
    </script>
</body>
</ht


